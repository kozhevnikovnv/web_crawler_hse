<!DOCTYPE html>
<!--
  Minimal Mistakes Jekyll Theme 4.21.0 by Michael Rose
  Copyright 2013-2020 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
--><html class="no-js" lang="ru">
<head>
<meta charset="utf-8"/>
<!-- begin _includes/seo.html --><title>Хотите знать, как устроен Биткоин (и другие криптовалюты)? | Михаил Коротеев</title>
<meta content="Опубликован перевод самого, наверное, лучшего популярного видео о том, как работает блокчейн и биткоин. Смотрите на канале 3blue1brown русский." name="description"/>
<meta content="Михаил Коротеев" name="author"/>
<meta content="Михаил Коротеев" property="article:author"/>
<meta content="article" property="og:type"/>
<meta content="ru_RU" property="og:locale"/>
<meta content="Михаил Коротеев" property="og:site_name"/>
<meta content="Хотите знать, как устроен Биткоин (и другие криптовалюты)?" property="og:title"/>
<meta content="https://koroteev.site/scipop/3b1b-blockchain/" property="og:url"/>
<meta content="Опубликован перевод самого, наверное, лучшего популярного видео о том, как работает блокчейн и биткоин. Смотрите на канале 3blue1brown русский." property="og:description"/>
<meta content="https://koroteev.site/assets/images/android-chrome-192x192.png" property="og:image"/>
<meta content="@koroteev_m" name="twitter:site"/>
<meta content="Хотите знать, как устроен Биткоин (и другие криптовалюты)?" name="twitter:title"/>
<meta content="Опубликован перевод самого, наверное, лучшего популярного видео о том, как работает блокчейн и биткоин. Смотрите на канале 3blue1brown русский." name="twitter:description"/>
<meta content="https://koroteev.site/scipop/3b1b-blockchain/" name="twitter:url"/>
<meta content="summary" name="twitter:card"/>
<meta content="https://koroteev.site/assets/images/android-chrome-192x192.png" name="twitter:image"/>
<meta content="2020-02-18T00:00:00+00:00" property="article:published_time"/>
<link href="https://koroteev.site/scipop/3b1b-blockchain/" rel="canonical"/>
<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    
      "@type": "Person",
      "name": "Михаил Коротеев",
      "url": "https://koroteev.site/"
    
  }
</script>
<meta content="77706580" name="yandex-verification"/>
<!-- end _includes/seo.html -->
<link href="/feed.xml" rel="alternate" title="Михаил Коротеев Feed" type="application/atom+xml"/>
<!-- https://t.co/dKP3o1e -->
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>
<!-- For all browsers -->
<link href="/assets/css/main.css" rel="stylesheet"/>
<link href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css" rel="stylesheet"/>
<!--[if IE]>
  <style>
    /* old IE unsupported flexbox fixes */
    .greedy-nav .site-title {
      padding-right: 3em;
    }
    .greedy-nav button {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
    }
  </style>
<![endif]-->
<!-- start custom head snippets -->
<style type="text/css">
.accordion {
  border: 1px solid white;
  padding: 0 10px;
  margin: 0 auto;
  list-style: none outside;
}

.accordion > * + * { border-top: 1px solid white; }

.accordion-item-hd {
  display: block;
  padding: 15px 30px 15px 0;
  position: relative;
  cursor: pointer;
  font-size: 18px;
  font-weight: bold;
}

.accordion-item-input:checked ~ .accordion-item-bd {
  max-height: 1000px;
  padding-top: 15px;
  margin-bottom: 15px;
  -webkit-transition: max-height 1s ease-in, margin .3s ease-in, padding .3s ease-in;
  transition: max-height 1s ease-in, margin .3s ease-in, padding .3s ease-in;
}

.accordion-item-input:checked ~ .accordion-item-hd > .accordion-item-hd-cta {
  -webkit-transform: rotate(0);
  -ms-transform: rotate(0);
  transform: rotate(0);
}

.accordion-item-hd-cta {
  display: block;
  width: 30px;
  position: absolute;
  top: calc(50% - 6px );
  /*minus half font-size*/
  right: 0;
  pointer-events: none;
  -webkit-transition: -webkit-transform .3s ease;
  transition: transform .3s ease;
  -webkit-transform: rotate(-180deg);
  -ms-transform: rotate(-180deg);
  transform: rotate(-180deg);
  text-align: center;
  font-size: 12px;
  line-height: 1;
}

.accordion-item-bd {
  max-height: 0;
  margin-bottom: 0;
  overflow: hidden;
  -webkit-transition: max-height .15s ease-out, margin-bottom .3s ease-out, padding .3s ease-out;
  transition: max-height .15s ease-out, margin-bottom .3s ease-out, padding .3s ease-out;
}

.accordion-item-input {
  clip: rect(0 0 0 0);
  width: 1px;
  height: 1px;
  margin: -1;
  overflow: hidden;
  position: absolute;
  left: -9999px;
}
</style>
<!-- insert favicons. use https://realfavicongenerator.net/ -->
<!-- end custom head snippets -->
</head>
<body class="layout--single None">
<nav class="skip-links">
<h2 class="screen-reader-text">Skip links</h2>
<ul>
<li><a class="screen-reader-shortcut" href="#site-nav">Skip to primary navigation</a></li>
<li><a class="screen-reader-shortcut" href="#main">Skip to content</a></li>
<li><a class="screen-reader-shortcut" href="#footer">Skip to footer</a></li>
</ul>
</nav>
<!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->
<div class="masthead">
<div class="masthead__inner-wrap">
<div class="masthead__menu">
<nav class="greedy-nav" id="site-nav">
<a class="site-logo" href="/"><img alt="" src="/assets/images/android-chrome-192x192.png"/></a>
<a class="site-title" href="/">
          Михаил Коротеев
          <span class="site-subtitle">Личный сайт</span>
</a>
<ul class="visible-links"><li class="masthead__menu-item">
<a href="/os">UNIX</a>
</li><li class="masthead__menu-item">
<a href="/ml">ML</a>
</li><li class="masthead__menu-item">
<a href="/md">Android</a>
</li><li class="masthead__menu-item">
<a href="/courses">Все курсы</a>
</li><li class="masthead__menu-item">
<a href="/blog/">Блог</a>
</li><li class="masthead__menu-item">
<a href="/science">Проекты</a>
</li></ul>
<button class="greedy-nav__toggle hidden" type="button">
<span class="visually-hidden">Выпадающее меню</span>
<div class="navicon"></div>
</button>
<ul class="hidden-links hidden"></ul>
</nav>
</div>
</div>
</div>
<div class="initial-content">
<div id="main" role="main">
<div class="sidebar sticky">
<div itemscope="" itemtype="https://schema.org/Person">
<div class="author__avatar">
<img alt="Михаил Коротеев" itemprop="image" src="/assets/images/avatar3.jpg"/>
</div>
<div class="author__content">
<h3 class="author__name" itemprop="name">Михаил Коротеев</h3>
<div class="author__bio" itemprop="description">
<p>Есть такая профессия - Родину автоматизировать.</p>
</div>
</div>
<div class="author__urls-wrapper">
<button class="btn btn--inverse">Связаться со мной</button>
<ul class="author__urls social-icons">
<li><a href="https://koroteev.site" rel="nofollow noopener noreferrer"><i aria-hidden="true" class="fas fa-fw fa-link"></i><span class="label">Website</span></a></li>
<li><a href="https://github.com/koroteevmv" rel="nofollow noopener noreferrer"><i aria-hidden="true" class="fab fa-fw fa-github"></i><span class="label">GitHub</span></a></li>
<li><a href="https://www.youtube.com/channel/UCPe6h6MY8XZpLV7oRLqRUwQ" rel="nofollow noopener noreferrer"><i aria-hidden="true" class="fab fa-fw fa-youtube"></i><span class="label">YouTube</span></a></li>
<li><a href="https://vk.com/koroteev_m" rel="nofollow noopener noreferrer"><i aria-hidden="true" class="fab fa-fw fa-vk"></i><span class="label">Vkontakte</span></a></li>
<!--
  <li>
    <a href="http://link-to-whatever-social-network.com/user/" itemprop="sameAs" rel="nofollow noopener noreferrer">
      <i class="fas fa-fw" aria-hidden="true"></i> Custom Social Profile Link
    </a>
  </li>
-->
</ul>
</div>
</div>
</div>
<article class="page" itemscope="" itemtype="https://schema.org/CreativeWork">
<meta content="Хотите знать, как устроен Биткоин (и другие криптовалюты)?" itemprop="headline"/>
<meta content="Опубликован перевод самого, наверное, лучшего популярного видео о том, как работает блокчейн и биткоин. Смотрите на канале 3blue1brown русский." itemprop="description"/>
<meta content="2020-02-18T00:00:00+00:00" itemprop="datePublished"/>
<div class="page__inner-wrap">
<header>
<h1 class="page__title" id="page-title" itemprop="headline">Хотите знать, как устроен Биткоин (и другие криптовалюты)?
</h1>
<p class="page__meta">
<span class="page__meta-date">
<i aria-hidden="true" class="far fa-calendar-alt"></i>
<time datetime="2020-02-18T00:00:00+00:00">February 18, 2020</time>
</span>
<span class="page__meta-sep"></span>
<span class="page__meta-readtime">
<i aria-hidden="true" class="far fa-clock"></i>
        
          18 мин на чтение
        
                
      </span>
</p>
</header>
<section class="page__content" itemprop="text">
<!-- Courtesy of embedresponsively.com //-->
<div class="responsive-video-container">
<iframe allowfullscreen="" frameborder="0" mozallowfullscreen="" src="https://www.youtube-nocookie.com/embed/Juv9v8wWa0I" webkitallowfullscreen=""></iframe>
</div>
<p><a href="https://www.youtube.com/watch?v=bBC-nXj3Ng4&amp;t=749s">Оригинал видео</a></p>
<p>Что значит, “ИМЕТЬ биткоин”? Многие люди слышали о биткоине, что это полностью цифровая валюта, без потребности в правительстве, чтобы ее выпускать, и без нужды в банках, чтобы открывать счета и подтверждать переводы. А еще, что никто не самом деле не знает личность его изобретателя. И все равно, немногие понимают ответ на этот вопрос. По крайней мере, в деталях.</p>
<p>Чтобы понять ответ, да еще так, чтобы все лежащие в основе технические детали показались осмысленными, мы проследим, шаг за шагом, как Вы могли бы изобрести свою собственную версию биткоина. Мы начнем с того, что вы отслеживаете расчеты по платежам, используя общий счет, а затем, по мере того, как вы доверяете своим друзьям и окружающему миру меньше и меньше; и если вы достаточно сообразительны, чтобы использовать некоторые идеи из криптографии, чтобы обойти потребность в доверии, вы получите то, что называют криптовалютой.</p>
<p>Видите ли, биткоин - это лишь первая реализация алгоритма криптовалют, и сейчас уже существуют сотни других на биржах обмена с традиционными валютами. Пройдя путь изобретения своей версии, мы заложим основы понимания того, как действуют основные игроки на рынке; понимания, где и как существуют варианты различных реализаций.</p>
<p>На самом деле, одна из причин, по которой я выбрал эту тему, это то, что в последние годы наблюдается огромный рост интереса, инвестиций, и что уж греха таить, просто хайпа на эту тему. Я не хочу комментировать или рассуждать по поводу цен на криптовалюты. Но, я думаю, мы все согласны, что если вы хотите купить криптовалюты, вы должны хорошо представлять себе, что это такое. И не только на уровне пространных аналогий с добычей золота, а точное  и реальное описание того, что именно делают компьютеры, когда мы перечисляем, получаем или создаем криптовалюту.</p>
<p>Одну вещь надо подчеркнуть: даже если мы собираемся погрузиться в детали, а это займет немного времени, вам не нужно знать все эти тонкости, чтобы просто пользоваться криптовалютами. Так же, как вам не нужно знать детали того, что происходит под капотом, когда вы проводите кредиткой. Как и в других областях цифровых расчетов, существует множество дружественных приложений, в которых можно просто отправлять или получать криптовалюту, не думая о том, что в реальности происходит. Разница в том, что в основе механизма реализации валюты стоит не банк, подтверждающий транзакции, а хитрая система децентрализованной проверки с нулевым доверием, основанная на математических схемах, рожденных в сфере криптографии.</p>
<p>Но пока, я хочу оставить мысль о криптовалютах, на время, мы начнем наше путешествие с чего-то более приземленного - баланс и цифровые подписи.</p>
<p>Если вы с друзьями часто обмениваетесь деньгами, например, совместно оплачивая счета в кафе, может быть не очень удобно каждый раз обмениваться наличными. Так что вы можете завести общий счет, или баланс, в который записывать запланированные платежи на будущее.  Например, “Алиса должна Бобу 20 долларов”, “Боб должен Чарли 40 долларов”, и так далее.</p>
<p>Этот баланс должен быть публичным и доступным всем участникам, как, например, веб-сайт, на который любой может зайти и добавить новую строку. И, скажем, в конце каждого месяца вы собираетесь вместе, просматриваете список платежей и рассчитываетесь. Если вы потратили больше, чем получили, вы скидываетесь в общий котел, а если получили больше, чем потратили - то забираете оттуда свои деньги.</p>
<p>Так что протокол участия в этой, очень простой, системе может выглядеть так: “каждый может добавлять строки в счет; а в конце месяца все собираются и рассчитываются”.</p>
<p>Одна из проблем с таким публичным балансом в том, что любой может добавить строку! Так, что остановит Боба добавить строку “Алиса должна Бобу 100 долларов” без ведома Алисы? Как мы можем убедиться, что каждая записанная транзакция - это именно то, что имел в виду отправитель?</p>
<p>Это как раз первая проблема, с которой нам поможет криптография - цифровые подписи. Как и письменные подписи, идея в том, что Алиса может добавить что-то к строке, что поможет убедиться, что она эту строку видела и одобряет. И должно быть практически нереально подделать эту подпись другому лицу.</p>
<p>На первый взгляд должно показаться, что цифровые подписи в принципе невозможны - ведь данные, которые составляют такую подпись могут быть просто скопированы компьютером. Так как защититься от подделок? Это работает так: каждый участник генерирует так называемую пару ключей - публичный и приватный ключ, каждый из которых выглядит как какая-то строка бит.</p>
<p>Приватный ключ иногда еще называют секретным ключом, так что мы можем обозначить его SK, а публичный ключ - PK. Как следует из названия, секретный ключ нужно хранить при себе.</p>
<p>В реальном мире ваша подпись выглядит одинаково, независимо от того, какой документ вы подписываете. Но цифровая подпись, оказывается, значительно сильнее, потому что она разная для разных сообщений. Она выглядит как какая-то строка случайных бит, обычно, 256 бит длиной и если поменять сообщение даже слегка, это полностью изменит подпись, которая должна удостоверять этот документ.</p>
<p>Говоря более формально, чтобы подписать документ, нужно воспользоваться функцией, зависящей и от самого документа и от вашего приватного ключа. Приватный ключ нужен для того, чтобы удостовериться, что только вы можете подписать этот документ, а то, что подпись зависит от сообщения гарантирует, что никто не сможет просто скопировать ее и поставить под другим сообщением.</p>
<p>В паре с этой функцией идет другая, с помощью которой можно удостовериться в правильности подписи, верифицировать ее. И здесь нам понадобится публичный ключ. Все, что эта функция делает - это вычисляет, да или нет, была ли данная подпись сделана с использованием приватного ключа, соответствующего публичному ключу, используемому для проверки.</p>
<p>Я не буду углубляться в детали того, как конкретно эти функции работают, но идея в том, чтобы сделать полностью нереальным правильную подпись документа, не зная приватного ключа. А именно, нет лучшего способа найти правильную подпись, чем просто угадывать и проверять случайные подписи, ведь вы можете проверять используя известный всем публичный ключ.</p>
<p>Подумайте, сколько существует возможных подписей длиной 256 бит? Их две в степени 256. Это невероятно огромное число. Называть его астрономическим - это сильно переоценивать астрономию. Кстати, я сделал дополнительное видео, просто чтобы показать, насколько большое это число. Пока давайте просто скажем, что если вы проверили подпись на каком-то сообщении, то можете быть абсолютно уверены, что единственный способ подписать это сообщение - это знать секретный ключ, парный тому публичному ключу, который вы используете для проверки.</p>
<p>Так что заставить людей подписывать свои транзакции - весьма удачная идея, но есть небольшая лазейка. Если Алиса подпишет транзакцию, скажем, “Алиса переводит Бобу 100 долларов”, даже при том, что Боб не сможет подделать подпись Алисы на новом сообщении, он может просто скопировать эту строку столько раз, сколько захочет. И эта комбинация сообщения и подписи останется валидной.</p>
<p>Есть способ предотвратить это - придумать правило, что когда вы подписываете транзакцию, она должна содержать какой-то уникальный идентификатор транзакции. Так что даже если Алиса переводит Бобу 100 долларов несколько раз, каждая транзакция будет отличаться этим идентификатором и потребует разных подписей.</p>
<p>Хорошо, цифровые подписи снимают огромный вопрос доверия с этого протокола. Но все равно, если вы решите ввести такую систему в реальности, вы будете полагаться на честность участников, а именно, вы доверяетесь тому, что каждый участник действительно будет  рассчитываться наличностью в конце каждого месяца.</p>
<p>Что если, например, Чарли тратит сотни долларов и просто исчезает в конце месяца? Вообще, единственная причина рассчитываться наличностью в том, что некоторые (например, Чарли) могут быть должны много денег.</p>
<p>Так что можно придумать хитрую систему, чтобы вообще никогда не рассчитываться, если есть способ не допустить чрезмерной траты участников. Например, сначала все участники скидывают в общий котел, скажем, 100 долларов, и вы записываете в баланс такие строки: “Алиса получает 100 долларов”, “Боб получает 100 долларов”, “Чарли получает 100 долларов” и так далее. Так что теперь не принимайте никакие транзакции, в которых участник тратит больше, чем у него есть на балансе.</p>
<p>Например, если первые две транзакции будут: “Чарли платит Алисе 50 долларов” и “Чарли платит Бобу 50 долларов” и потом он попытается добавить “Чарли платит вам 20 долларов”, это будет невалидно. Также невалидно, как если бы он вообще не подписал эту строку.</p>
<p>Обратите внимание, что это означает, что для подтверждения транзакции нужно знать полную историю всех транзакций до того. И это, в той или иной степени будет так и для криптовалют, хотя, есть некоторые способы для оптимизации.</p>
<p>Что интересно, этот шаг как бы убирает связь между нашим балансом и физическими наличными деньгами. Теоретически, если все в мире будут пользоваться нашим балансом, вы сможете прожить всю жизнь отправляя и получая деньги и никогда не превращая их в наличные. Так что чтобы подчеркнуть этот факт давайте назовем суммы в этом балансе “балансовыми долларами” или ЛД для краткости.</p>
<p>Вы, конечно, можете обменивать балансовые доллары на настоящие деньги. Например, скажем, Алиса дает Бобу 10 долларов в реальном мире в обмен на то, что он добавит и подпишет в балансе строку “Боб дает Алисе 10 балансовых долларов”. Но такие транзакции не гарантируются протоколом. Это больше похоже на то, как вы обмениваете доллары на евро или любые другие валюты на открытом рынке. Это своя, особая история.</p>
<p>Это первая важная вещь, которую нужно понять про биткоин, или любые другие криптовалюты. Это ни что иное, как баланс. История транзакций - это и есть валюта.</p>
<p>Конечно, в случае биткоина деньги не поступают в систему путем скидывания участниками наличности в общий котел. Мы расскажем, как создаются новые деньги чуть позже.</p>
<p>Но перед этим мы расскажем о еще более существенном различии между криптовалютами и нашими балансовыми деньгами.</p>
<p>Пока что мы говорили, что этот баланс должен храниться в каком-то публично доступном месте, как веб-сайт, где все могут добавлять строки. Но это требует надежного центрального хранилища, которому все доверяют. А именно: кто хранит веб-сайт? Кто контролирует правила добавления новых строк? Чтобы избавиться и от этого доверительного элемента, мы заставим всех участников хранить собственную копию баланса. Так что когда вы хотите совершить транзакцию, например, “Алиса переводит Бобу 100 долларов”, вы распространяете это сообщение среди всех участников системы, чтобы они добавили эту строку к своей копии баланса.</p>
<p>НО, если вы не сделаете еще что-то, эта система просто абсурдна. Как можно убедиться, что у всех совпадают балансы? Если Боб слышит транзакцию, “Алиса переводит Бобу 10 долларов”, как он может быть уверенным, что все остальные услышали и добавили эту транзакцию? Чтобы он смог потом пойти и перевести эти 10 долларов, скажем, Чарли.</p>
<p>Правда, вообразите, что вы сидите и слушаете транзакции. Как вы можете быть уверены, что все остальные слышат и записывают те же транзакции и в том же порядке?</p>
<p>Это действительно центральная проблема. И это интересная задача: как составить протокол, обеспечивающий принятие и проверку транзакций в нужном порядке, так чтобы быть уверенным, что все в мире, следующие тому же протоколу, имеют свою копию баланса полностью совпадающую с вашей? Этой проблеме как раз и была посвящения изначальная публикация о биткоине.</p>
<p>На высоком уровне, решение, предложенное биткоином состоит в доверии тому балансу, который содержит наибольшее количество вычислительной работы. Давайте остановимся, чтобы объяснить, что это значит, это связано с понятием криптографических хэш-функций. Главная идея, к которой мы придем - то, что если вы используете вычислительные ресурсы, чтобы решить, чему доверять, можно устроить таким образом, чтобы неправильные транзакции и спорные балансы потребуют нереально больших ресурсов для их поддержания. Еще раз напомню, что это уже далеко за гранью того, что кому-то может понадобиться, чтобы просто использовать подобные криптовалюты.</p>
<p>Но это очень клевая идея! Если понять ее, то вы поймете принцип биткоина и других криптовалют.</p>
<p>Во-первых, разберёмся, что такое хэш-функция. Входными данными для такой функции могут быть любые сообщения или файлы, неважно какие. А выход - это срока бит с фиксированной длинной, например, 256 бит. Этот выход называют хэш или сводка сообщения, и смысл в том, что он выглядит случайным. Он не является случайным, функция всегда даст тот же выход для того же сообщения, но идея в том, что если вы хоть немного измените сообщение, поменяете даже одну букву, получившийся хэш меняется полностью.</p>
<p>На самом деле, для хэш-функции, показанной здесь, а именно SHA-256, хэш поменяется полностью непредсказуемо при небольшом изменении сообщения. Поэтому это не просто хэш-функция, это криптографическая хэш-функция, что значит, ее нереально вычислить в обратном направлении. Если я покажу вам какую-то строку нулей и единиц и попрошу найти сообщение, которое даст именно такую строку в функции SHA-256, то у вас не будет лучшего способа, чем просто угадывать и проверять.</p>
<p>И опять, если вы хотите прочувствовать, сколько вычислений потребуется для проверки двух в степени 256 попыток, посмотрите дополнительное видео. Мне, на самом деле гораздо больше понравилось делать его.</p>
<p>Вы можете подумать, что если досконально разобраться в деталях того, как в точности работает такая функция, можно сообразить как вычислить нужное сообщение, без необходимости гадать. Но до сих пор никому такое не удалось. Интересно, что не существует точного математического доказательства, что хэш-функцию сложно вычислить в обратном направлении. И все же, огромная часть современной информационной безопасности основана на криптографических хэш-функциях и на этом их свойстве. Если вы захотите посмотреть, какие алгоритмы используются в обеспечении безопасности соединения вашего браузера с Ютубом или с вашим банком, вы скорее всего увидите упоминание алгоритма SHA-256.</p>
<p>Но пока мы разбираемся в том, как подобная функция может нам помочь убедиться в том, что конкретный список транзакций подтвержден большим количеством вычислительной работы.</p>
<p>Представьте, что кто-то показал вам список транзакций. И он говорит: “Эй, я нашел особое число, такое что если дописать его в конце списка транзакций и применить SHA-256, то первые 30 бит получившегося хэша - все нули”. Как трудно для него, на ваш взгляд, было найти такое число?</p>
<p>Для случайного сообщения вероятность того, что хэш начинается с тридцати нулей подряд составляет один к двум в тридцатой, то есть примерно один к миллиарду. И так как SHA-256 это криптографическая хэш-функция, единственный способ найти такое особое число - это угадывать и проверять. Так что этому человеку наверняка пришлось перебрать почти миллиард чисел, чтобы найти такое особое.</p>
<p>Но когда вы нашли такое число проверить его очень легко - примените хэш-функцию и посмотрите, не начинается ли она с тридцати нулей. Другими словами, вы можете проверить, что он проделал большую работу, но без необходимости проделывать ее заново. Это называется “доказательство работы”. И, что очень важно, вся эта работа неразрывно связана со списком транзакций, который мы рассматриваем. Если изменить одну из этих транзакций, даже слегка, хэш полностью поменяется и вам придется перебирать еще миллиард попыток, чтобы найти новое доказательство работы - число, которое заставляет хэш нового сообщения вместе с этим числом начинался с тридцати нулей.</p>
<p>Теперь давайте вспомним о нашей распределенной системе балансов. Все участники распространяют транзакции и нам нужен способ убедить их согласиться с правильной версией списка. Как я уже говорил, центральная идея в биткойне состоит в том, что все доверяют списку, в который вложено наибольшее количество вычислительной работы.</p>
<p>Это работает таким образом: сначала мы организуем наш баланс в виде блоков, каждый из которых содержит список транзакций вместе с доказательством работы, то есть специальным числом, которое заставляет хэш всего блока начинаться с определенного количества нулей. Пока давайте скажем, что он должен начинаться, например, с шестидесяти нулей, хотя позднее мы вернемся к более обоснованному способу выбирать это число.</p>
<p>Так же как транзакция считается валидной только если она подписана отправителем, блок считается валидным, если он содержит доказательство работы. И еще, чтобы убедиться, что поддерживается определенная последовательность этих блоков, включим в заголовок каждого блока хэш предыдущего блока. Если вы вернетесь назад и измените одну транзакцию в блоке, или поменяете порядок двух блоков, вы измените блок, следующий за этим, что изменит его хэш, что изменит следующий блок и так далее.</p>
<p>Это потребует переделывания всей работы, поиска нового специального числа для каждого блока так, чтобы их хэши начинались с шестидесяти нулей. Так как блоки организованы в такую цепочку, вместо того, чтобы называть эту систему балансом, ее обычно называют блокчейн.</p>
<p>Теперь в обновлении нашего протокола мы разрешим любому участнику в мире быть создателем блоков. Это значит, что они будут слушать транзакции, распространяемые участниками, собирать их в блок, и проделывать работы по поиску специального числа, чтобы хэш этого блока начинался с шестидесяти нулей. И как только они нашли его, они распространяют новый блок.</p>
<p>Чтобы поощрить создателей блоков за их работу, мы разрешим тому, кто создает блок, включить в него особую транзакцию, в которой он получает, скажем, 10 балансовых долларов из воздуха. Это называется награда за блок. И это исключение из нашего обычного правила о том, как надо подтверждать транзакции. Это не перевод от кого-то, так что ее не нужно подписывать. И еще это значит, что общее количество балансовых долларов в нашей экономической системе будет увеличиваться с каждым новым блоком.</p>
<p>Создание блоков часто называют майнинг, так как это означает много работы и создает новые единицы валюты в экономике. Но когда вы слышите или читаете о майнерах помните, что все, что они делают - это слушают транзакции, создают блоки, распространяют эти блоки и получают в награду новые деньги за это.</p>
<p>С точки зрения майнера, каждый блок это как мини-лотерея, в которой все угадывают числа насколько быстро, насколько могут, а когда один из них получает число, которое заставляет хэш блока начинаться с кучи нулей, он выигрывает и забирает награду.</p>
<p>Для обычных людей, кто хочет использовать систему для платежей, вместо того, чтобы слушать транзакции, достаточно слушать только блоки, которые распространяют майнеры, и добавлять их к своей собственной копии блокчейна.</p>
<p>Ключевое нововведение в наш протокол такое: если вы получили две разные версии блокчейна, с разной версией истории транзакций, вы доверяете наиболее длинной, с которой связано большее количество работы. Если ничья, просто подождите, пока не придет еще один блок, который сделает одну из цепочек длиннее. Так что даже в отсутствии центрального элемента все поддерживают свою собственную копию блокчейна. Пока все соглашаются предпочитать блокчейн, содержащий наибольшее количество работы, мы можем прийти к распределенному консенсусу.</p>
<p>Чтобы понять, как это обеспечивает доверенную систему, и как можно доверять платежам в ней, довольно полезно проследить путь, который потребуется пройти, чтобы обмануть кого-то в такой системе. Допустим, Алиса пытается обмануть Боба с помощью поддельного блока. А именно, она пытается отправить ему такой, который включает строку “Алиса платит Бобу 100 долларов”, но не распространять этот блок на всю сеть, чтобы все остальные думали, что у нее все еще есть эти 100 долларов. Для этого ей нужно найти правильное доказательство работы до всех остальных майнеров, каждый из которых работает над своим блоком. И это вполне может случиться. Может, Алиса просто выиграет в эту мини-лотерею раньше всех остальных.</p>
<p>Но Боб все еще будет слышать сообщения от остальных майнеров. Поэтому чтобы заставить его продолжать верить этой поддельной цепочки блоков, Алисе придется проделывать всю работу самой, чтобы продолжать добавлять блоки в эту специальную цепочку Боба, которая отличается от того, что он слышит от остальных. Помните, что по протоколу, Боб всегда доверяет наиболее длинной цепочке блоков, которую он слышит.</p>
<p>Алисе может это удаваться в течении нескольких блоков, если чисто случайно у нее получится находить блоки быстрее, чем все остальные майнеры вместе взятые, но если она располагает меньше, чем половиной вычислительных ресурсов всех майнеров, теория вероятностей гарантирует, что цепочка блоков, которую создают другие майнеры, будет расти быстрее, чем поддельная цепочка, создаваемая Алисой.</p>
<p>Так что через некоторое время, Боб просто отбросит цепочку, которую слышит от Алисы в пользу более длинной цепи, с которой все согласны.</p>
<p>Обратите внимание, это значит, что вы не должны обязательно доверять новому блоку немедленно. Лучше подождать несколько новых блоков после него. Если вы не получаете никаких конфликтных цепочек, можно быть уверенным, что этот блок часть блокчейна, который используется всеми.</p>
<p>И вот теперь мы прошли по всем главным идеям. Эта распределенная система балансов, основанная на доказательстве работы - более или менее так и работает протокол биткоина, и так же работают многие другие криптовалюты. Осталось прояснить лишь несколько деталей. Ранее мы сказали, что доказательством работы может служить специальное число, из-за которого хэш блока начинается с шестидесяти нулей. На практике протокол биткоина построен так, чтобы периодически изменять это число нулей таким образом, что в среднем создание нового блока занимает примерно 10 минут. Так что чем больше майнеров работает в сети, лотерея становится все сложнее и сложнее так, что появляется в среднем один победитель каждые десять минут.</p>
<p>Многие новые криптовалюты имеют более короткое время создания блока. И все деньги в биткоинах изначально создаются как награды за создание блоков. В начале эти награды составляли 50 биткоинов за блок. Кстати, существует прекрасный сайт под названием обозреватель блоков, на котором можно удобно посмотреть блокчейн биткоина. Если посмотреть на самые первые блоки, то они не содержат никаких транзакций, только зачисление награды за блок майнеру. Раз в двести десять тысяч блоков, то есть раз в примерно четыре года, эта награда уменьшается вдвое. Так что сейчас награда составляет двенадцать с половиной биткоинов за блок. И так как эта награда уменьшается геометрически, это означает, что не может существовать больше двадцати одного миллиона биткоинов в природе.</p>
<p>Но это не значит, что майнеры перестанут зарабатывать деньги. Кроме награды за блоки майнеры также могут собирать комиссии за транзакции. Это устроено так, что каждый раз при совершении платежа вы, исключительно добровольно, можете включить в него небольшую комиссию, которая пойдет майнеру, включившему этот блок в блокчейн.</p>
<p>Вы можете это делать, чтобы стимулировать майнеров включить транзакцию, которую вы только что сделали в следующий блок. Видите ли, в биткойне каждый блок имеет ограничение в около двух тысяч четыреста транзакций, что, как указывают многие критики, слишком маленькое количество.</p>
<p>Для сравнения, Виза обрабатывает в среднем тысячу семьсот транзакций в секунду, а способна обрабатывать больше, чем двадцать четыре тысячи в секунду. Эта сравнительно медленная обработка транзакций в биткойне приводит к относительно высоким комиссиям, так как они определяют, какие транзакции майнеры включают в следующие блоки.</p>
<p>Все это далеко от подробного рассмотрения криптовалют, существует еще много нюансов и архитектурных решений, которых я не коснулся. Но я надеюсь, что это описание может дать вам базовое понимание, с которого можно начать погружаться в данную тему. Как я сказал в начале, одним из мотивов к рассмотрению этой темы явилось то, что много денег в последнее время начали течь в сторону криптовалют. И хотя я не хочу делать никаких заявлений, хорошо это или плохо, мне кажется что для людей, входящих в эту игру, полезно знать принципы лежащей в основе технологии.</p>
<p>Как всегда, мои искренние благодарности всем, кто сделал этот канал возможным на Патреоне. Я понимаю, что не все в состоянии внести свой вклад, но если вы все еще хотите помочь, самый простой способ - это поделиться тем видео, которое вы считаете интересным или полезным другим. Я знаю, что вы знаете это, но это правда помогает. Я также хочу поблагодарить Протокол Лабс за их поддержку этому видео. Это организация, которая занимается разными исследованиями и разработками, и если вы пройдете по ссылкам в описании, где есть детали этих проектов, вы найдете параллели с концепциями, рассмотренными в этом видео.</p>
<p>Применения и проблемы децентрализации ни в коем случае не ограничены криптовалютами и историями транзакций. И польза от инструментов криптографии, таких как хэш-функции и цифровые подписи, также более общие. Например, некоторые проекты Протокол Лабс, такие как IPFS и FileCoin посвящены идее распределенного файлового хранилища, что открывает целое поле новых возможностей. Для разработчиков среди вас - Протокол Лабс высоко ценит открытый исходный код, так что если интересно, вы можете стать частью уже довольно сильного сообщества. Но они также ищут разработчиков на полный день, так что если вы считаете, что подойдете - подайте заявку.</p>
</section>
<footer class="page__meta">
<p class="page__taxonomy">
<strong><i aria-hidden="true" class="fas fa-fw fa-tags"></i> Метки: </strong>
<span itemprop="keywords">
<a class="page__taxonomy-item" href="/tags/#3b1b" rel="tag">3b1b</a><span class="sep">, </span>
<a class="page__taxonomy-item" href="/tags/#math" rel="tag">math</a><span class="sep">, </span>
<a class="page__taxonomy-item" href="/tags/#translation" rel="tag">translation</a>
</span>
</p>
<p class="page__taxonomy">
<strong><i aria-hidden="true" class="fas fa-fw fa-folder-open"></i> Разделы: </strong>
<span itemprop="keywords">
<a class="page__taxonomy-item" href="/categories/#scipop" rel="tag">scipop</a>
</span>
</p>
<p class="page__date"><strong><i aria-hidden="true" class="fas fa-fw fa-calendar-alt"></i> Дата изменения:</strong> <time datetime="2020-02-18T00:00:00+00:00">February 18, 2020</time></p>
</footer>
<nav class="pagination">
<a class="pagination--pager" href="/talks/interview-ml-art/" title="Машинное обучение – это искусство
">Предыдущая</a>
<a class="pagination--pager" href="/scipop/peterson-essay/" title="Руководство по написанию эссе
">Следующая</a>
</nav>
</div>
</article>
<div class="page__related">
<h4 class="page__related-title">Вам также может понравиться</h4>
<div class="grid__wrapper">
<div class="grid__item">
<article class="archive__item" itemscope="" itemtype="https://schema.org/CreativeWork">
<div class="archive__item-teaser">
<img alt="" src="http://brightmagazine.ru/wp-content/uploads/2022/10/christina-wocintechchat-com-qZYNQp_Lm3o-unsplash.jpg"/>
</div>
<h2 class="archive__item-title no_toc" itemprop="headline">
<a href="http://brightmagazine.ru/ie/">Сколько получают IT-специалисты в России?
</a> <a href="/talks/bright-brains/" rel="permalink"><i aria-hidden="true" class="fas fa-link" title="permalink"></i><span class="sr-only">Permalink</span></a>
</h2>
<p class="page__meta">
<span class="page__meta-date">
<i aria-hidden="true" class="far fa-fw fa-calendar-alt"></i>
<time datetime="2022-09-26T00:00:00+00:00">September 26, 2022</time>
</span>
<span class="page__meta-sep"></span>
<span class="page__meta-readtime">
<i aria-hidden="true" class="far fa-fw fa-clock"></i>
        
          менее 1 мин на чтение
        
                
      </span>
</p>
<p class="archive__item-excerpt" itemprop="description">Вместе с заместителем декана по учебной работе Финансового университета при Правительстве РФ, кандидатом экономических наук, Михаилом Коротеевым разбираемся ...</p>
</article>
</div>
<div class="grid__item">
<article class="archive__item" itemscope="" itemtype="https://schema.org/CreativeWork">
<div class="archive__item-teaser">
<img alt="" src="https://brightmagazine.ru/wp-content/uploads/2022/05/pexels-george-morina-4960341.jpg"/>
</div>
<h2 class="archive__item-title no_toc" itemprop="headline">
<a href="https://brightmagazine.ru/proit/">Сколько получают IT-специалисты в России?
</a> <a href="/talks/bright-it-salaries/" rel="permalink"><i aria-hidden="true" class="fas fa-link" title="permalink"></i><span class="sr-only">Permalink</span></a>
</h2>
<p class="page__meta">
<span class="page__meta-date">
<i aria-hidden="true" class="far fa-fw fa-calendar-alt"></i>
<time datetime="2022-05-04T00:00:00+00:00">May 4, 2022</time>
</span>
<span class="page__meta-sep"></span>
<span class="page__meta-readtime">
<i aria-hidden="true" class="far fa-fw fa-clock"></i>
        
          менее 1 мин на чтение
        
                
      </span>
</p>
<p class="archive__item-excerpt" itemprop="description">Среди молодых специалистов России укоренился стереотип о том, что программисты, специалисты по ИТ «несправедливо» много зарабатывают. Насколько он оправдан, ...</p>
</article>
</div>
<div class="grid__item">
<article class="archive__item" itemscope="" itemtype="https://schema.org/CreativeWork">
<h2 class="archive__item-title no_toc" itemprop="headline">
<a href="https://www.youtube.com/playlist?list=PLhgyvraU60gUz40uPfZcCO6ar7dw7PCqs">Android-разработка
</a> <a href="/course/android-playlist/" rel="permalink"><i aria-hidden="true" class="fas fa-link" title="permalink"></i><span class="sr-only">Permalink</span></a>
</h2>
<p class="page__meta">
<span class="page__meta-date">
<i aria-hidden="true" class="far fa-fw fa-calendar-alt"></i>
<time datetime="2022-03-16T00:00:00+00:00">March 16, 2022</time>
</span>
<span class="page__meta-sep"></span>
<span class="page__meta-readtime">
<i aria-hidden="true" class="far fa-fw fa-clock"></i>
        
          менее 1 мин на чтение
        
                
      </span>
</p>
<p class="archive__item-excerpt" itemprop="description">Цикл видеолекций по разработке мобильных приложений для Android на языке Java.
</p>
</article>
</div>
<div class="grid__item">
<article class="archive__item" itemscope="" itemtype="https://schema.org/CreativeWork">
<h2 class="archive__item-title no_toc" itemprop="headline">
<a href="https://www.youtube.com/playlist?list=PLhgyvraU60gU8OAhjtcipU_sO7UYvkQl9">UNIX
</a> <a href="/course/linux-playlist/" rel="permalink"><i aria-hidden="true" class="fas fa-link" title="permalink"></i><span class="sr-only">Permalink</span></a>
</h2>
<p class="page__meta">
<span class="page__meta-date">
<i aria-hidden="true" class="far fa-fw fa-calendar-alt"></i>
<time datetime="2021-06-20T00:00:00+00:00">June 20, 2021</time>
</span>
<span class="page__meta-sep"></span>
<span class="page__meta-readtime">
<i aria-hidden="true" class="far fa-fw fa-clock"></i>
        
          менее 1 мин на чтение
        
                
      </span>
</p>
<p class="archive__item-excerpt" itemprop="description">Цикл видеолекций по операционной системе Linux.
</p>
</article>
</div>
</div>
</div>
</div>
</div>
<div class="page__footer" id="footer">
<footer>
<!-- start custom footer snippets -->
<!-- end custom footer snippets -->
<div class="page__footer-follow">
<ul class="social-icons">
<li><strong>Связаться со мной:</strong></li>
<li><a href="https://vk.com/koroteev_m" rel="nofollow noopener noreferrer"><i aria-hidden="true" class="fab fa-fw fa-vk"></i> Vkontakte</a></li>
<li><a href="https://twitter.com/koroteev_m" rel="nofollow noopener noreferrer"><i aria-hidden="true" class="fab fa-fw fa-twitter-square"></i> Twitter</a></li>
<li><a href="/feed.xml"><i aria-hidden="true" class="fas fa-fw fa-rss-square"></i> RSS-лента</a></li>
</ul>
</div>
<div class="page__footer-copyright">© 2022 Михаил Коротеев. Сайт работает на <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>
</footer>
</div>
<script src="/assets/js/main.min.js"></script>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-1K09X3NDBE"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-1K09X3NDBE', { 'anonymize_ip': false});
</script>
<!-- Yandex.Metrika counter -->
<script type="text/javascript">
   (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
   m[i].l=1*new Date();k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
   (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");

   ym(77706580, "init", {
        clickmap:true,
        trackLinks:true,
        accurateTrackBounce:true
   });
</script>
<noscript><div><img alt="" src="https://mc.yandex.ru/watch/77706580" style="position:absolute; left:-9999px;"/></div></noscript>
<!-- /Yandex.Metrika counter -->
<script async="" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-MML-AM_CHTML" type="text/javascript">
</script>
<script type="text/x-mathjax-config">
   MathJax.Hub.Config({
     extensions: ["tex2jax.js"],
     jax: ["input/TeX", "output/HTML-CSS"],
     tex2jax: {
       inlineMath: [ ['$','$'], ["\\(","\\)"] ],
       displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
       processEscapes: true
     },
     "HTML-CSS": { availableFonts: ["TeX"] }
   });
</script>
<script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
</body>
</html>
