<!DOCTYPE html>
<!--
  Minimal Mistakes Jekyll Theme 4.21.0 by Michael Rose
  Copyright 2013-2020 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
--><html class="no-js" lang="ru">
<head>
<meta charset="utf-8"/>
<!-- begin _includes/seo.html --><title>LX2 Использование удаленного доступа по SSH | Михаил Коротеев</title>
<meta content="" name="description"/>
<meta content="Михаил Коротеев" name="author"/>
<meta content="Михаил Коротеев" property="article:author"/>
<meta content="article" property="og:type"/>
<meta content="ru_RU" property="og:locale"/>
<meta content="Михаил Коротеев" property="og:site_name"/>
<meta content="LX2 Использование удаленного доступа по SSH" property="og:title"/>
<meta content="https://koroteev.site/os/1/2-ssh/" property="og:url"/>
<meta content="" property="og:description"/>
<meta content="https://koroteev.site/assets/images/android-chrome-192x192.png" property="og:image"/>
<meta content="@koroteev_m" name="twitter:site"/>
<meta content="LX2 Использование удаленного доступа по SSH" name="twitter:title"/>
<meta content="" name="twitter:description"/>
<meta content="https://koroteev.site/os/1/2-ssh/" name="twitter:url"/>
<meta content="summary" name="twitter:card"/>
<meta content="https://koroteev.site/assets/images/android-chrome-192x192.png" name="twitter:image"/>
<meta content="2022-09-27T12:49:07+00:00" property="article:published_time"/>
<link href="https://koroteev.site/os/1/2-ssh/" rel="canonical"/>
<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    
      "@type": "Person",
      "name": "Михаил Коротеев",
      "url": "https://koroteev.site/"
    
  }
</script>
<meta content="77706580" name="yandex-verification"/>
<!-- end _includes/seo.html -->
<link href="/feed.xml" rel="alternate" title="Михаил Коротеев Feed" type="application/atom+xml"/>
<!-- https://t.co/dKP3o1e -->
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>
<!-- For all browsers -->
<link href="/assets/css/main.css" rel="stylesheet"/>
<link href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css" rel="stylesheet"/>
<!--[if IE]>
  <style>
    /* old IE unsupported flexbox fixes */
    .greedy-nav .site-title {
      padding-right: 3em;
    }
    .greedy-nav button {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
    }
  </style>
<![endif]-->
<!-- start custom head snippets -->
<style type="text/css">
.accordion {
  border: 1px solid white;
  padding: 0 10px;
  margin: 0 auto;
  list-style: none outside;
}

.accordion > * + * { border-top: 1px solid white; }

.accordion-item-hd {
  display: block;
  padding: 15px 30px 15px 0;
  position: relative;
  cursor: pointer;
  font-size: 18px;
  font-weight: bold;
}

.accordion-item-input:checked ~ .accordion-item-bd {
  max-height: 1000px;
  padding-top: 15px;
  margin-bottom: 15px;
  -webkit-transition: max-height 1s ease-in, margin .3s ease-in, padding .3s ease-in;
  transition: max-height 1s ease-in, margin .3s ease-in, padding .3s ease-in;
}

.accordion-item-input:checked ~ .accordion-item-hd > .accordion-item-hd-cta {
  -webkit-transform: rotate(0);
  -ms-transform: rotate(0);
  transform: rotate(0);
}

.accordion-item-hd-cta {
  display: block;
  width: 30px;
  position: absolute;
  top: calc(50% - 6px );
  /*minus half font-size*/
  right: 0;
  pointer-events: none;
  -webkit-transition: -webkit-transform .3s ease;
  transition: transform .3s ease;
  -webkit-transform: rotate(-180deg);
  -ms-transform: rotate(-180deg);
  transform: rotate(-180deg);
  text-align: center;
  font-size: 12px;
  line-height: 1;
}

.accordion-item-bd {
  max-height: 0;
  margin-bottom: 0;
  overflow: hidden;
  -webkit-transition: max-height .15s ease-out, margin-bottom .3s ease-out, padding .3s ease-out;
  transition: max-height .15s ease-out, margin-bottom .3s ease-out, padding .3s ease-out;
}

.accordion-item-input {
  clip: rect(0 0 0 0);
  width: 1px;
  height: 1px;
  margin: -1;
  overflow: hidden;
  position: absolute;
  left: -9999px;
}
</style>
<!-- insert favicons. use https://realfavicongenerator.net/ -->
<!-- end custom head snippets -->
</head>
<body class="layout--coursepage">
<nav class="skip-links">
<h2 class="screen-reader-text">Skip links</h2>
<ul>
<li><a class="screen-reader-shortcut" href="#site-nav">Skip to primary navigation</a></li>
<li><a class="screen-reader-shortcut" href="#main">Skip to content</a></li>
<li><a class="screen-reader-shortcut" href="#footer">Skip to footer</a></li>
</ul>
</nav>
<!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->
<div class="masthead">
<div class="masthead__inner-wrap">
<div class="masthead__menu">
<nav class="greedy-nav" id="site-nav">
<a class="site-logo" href="/"><img alt="" src="/assets/images/android-chrome-192x192.png"/></a>
<a class="site-title" href="/">
          Михаил Коротеев
          <span class="site-subtitle">Личный сайт</span>
</a>
<ul class="visible-links"><li class="masthead__menu-item">
<a href="/os">UNIX</a>
</li><li class="masthead__menu-item">
<a href="/ml">ML</a>
</li><li class="masthead__menu-item">
<a href="/md">Android</a>
</li><li class="masthead__menu-item">
<a href="/courses">Все курсы</a>
</li><li class="masthead__menu-item">
<a href="/blog/">Блог</a>
</li><li class="masthead__menu-item">
<a href="/science">Проекты</a>
</li></ul>
<button class="greedy-nav__toggle hidden" type="button">
<span class="visually-hidden">Выпадающее меню</span>
<div class="navicon"></div>
</button>
<ul class="hidden-links hidden"></ul>
</nav>
</div>
</div>
</div>
<div class="initial-content">
<div id="main" role="main">
<div class="sidebar sticky">
<nav class="nav__list">
<input id="ac-toc" name="accordion-toc" type="checkbox"/>
<label for="ac-toc">Выпадающее меню</label>
<ul class="nav__items">
<li>
<a href="/os/"><span class="nav__sub-title">Содержание курса</span></a>
</li>
<li>
<span class="nav__sub-title">1. Основы Linux</span>
<ul>
<li><a href="/os/1/0-vm_installation/">Введение</a></li>
<li><a href="/os/1/1-cli/">Командная строка</a></li>
<li><a href="/os/1/2-ssh/">Использование ssh</a></li>
<li><a href="/os/1/3-users/">Пользователи и права</a></li>
<li><a href="/os/1/4-processes/">Архитектура, пакеты, процессы</a></li>
</ul>
</li>
<li>
<span class="nav__sub-title">2. Администрирование Linux</span>
<ul>
<li><a href="/os/2/1-init/">Управление загрузкой</a></li>
<li><a href="/os/2/1-filesystems/">Файловые системы</a></li>
<li><a href="/os/2/3-bash/">Основы скриптов на bash</a></li>
<li><a href="/os/2/4-text/">Средства обработки текста</a></li>
<li><a href="/os/2/5-network/">Настройка сети</a></li>
</ul>
</li>
<li>
<span class="nav__sub-title">3. Сетевое программирование</span>
<ul>
<li><a href="/os/3/0-environment/">Настройка окружения Python</a></li>
<li><a href="/os/3/2-git/">Системы контроля версий</a></li>
<li><a href="/os/3/3-sockets/">Использование сокетов</a></li>
<li><a href="/os/3/4-threading/">Асинхронное программирование</a></li>
<li><a href="/os/4/1-tls/">Безопасность в сетях</a></li>
<li><a href="/os/4/2-web-server/">Веб-служба</a></li>
<li><a href="/os/4/5-deploy/">Развертывание приложений</a></li>
</ul>
</li>
</ul>
</nav>
</div>
<article class="page" itemscope="" itemtype="https://schema.org/CreativeWork">
<meta content="LX2 Использование удаленного доступа по SSH" itemprop="headline"/>
<meta content="" itemprop="description"/>
<meta content="2022-09-27T12:49:07+00:00" itemprop="datePublished"/>
<div class="page__inner-wrap">
<header>
<h1 class="page__title" id="page-title" itemprop="headline">LX2 Использование удаленного доступа по SSH
</h1>
</header>
<section class="page__content" itemprop="text">
<aside class="sidebar__right sticky">
<nav class="toc">
<header><h4 class="nav__title"><i class="fas fa-file-alt"></i> Содержание</h4></header>
<ul class="toc__menu">
<li><a href="#Лекция: Удаленная работа по SSH"> Лекция: Удаленная работа по SSH</a>
<ul>
<li><a href="#1-slides">Презентация</a></li>
</ul>
</li>
<li><a href="#Практика: SSH"> Практика: SSH</a>
<ul>
<li><a href="#2-video">Видео занятия</a></li>
</ul>
</li>
<li><a href="#Практика: Tmux"> Практика: Tmux</a>
<ul>
<li><a href="#3-video">Видео занятия</a></li>
<li><a href="#3-additional">Дополнительные материалы</a></li>
</ul>
</li>
</ul>
</nav>
</aside>
<h2 id="Лекция: Удаленная работа по SSH"> Лекция: Удаленная работа по SSH</h2>
<p> Мы узнаем, как и зачем подключаться к удаленной машине по сети, какие для этого существуют программы и протоколы.</p>
<h3 id="1-slides">Презентация</h3>
      Смотреть <a href="/pres/os12-0/">слайды</a> к этому занятию.
  

      
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
<div>
  ### Зачем нужен протокол SSH?

Обычные пользователи почти всегда работают с компьютером локально. То есть они физически находятся у компьютера, используют имеющиеся у него устройства ввода-вывода (клавиатуру, мышь, дисплей) для выполнения необходимых операций. Однако, не всегда есть возможность физически находиться у компьютера, с которым нужно работать. Например, если вы хотите создать свой сайт, то он будет размещен на компьютере хостинг-провайдера. Этот компьютер может находиться на другом конце света. Вам нужен способ запускать команды на этом компьютере не выходя из своего дома. При профессиональной работе с компьютерами часто возникает потребность выполнять определенные операции на удаленных машинах. Например, системный администратор может обслуживать компьютерную сеть, состоящую из десятков компьютеров. Было бы очень неудобно постоянно физически перемещаться между компьютерами. Более того, удаленный компьютер может располагаться, например, в центре обработки данных у облачного провайдера, или быть вообще виртуальной машиной на кластере. Такое часто бывает при использовании облачных систем.

![Datacenter](https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTNBrnhYAgro1NXSkPZoJ_Z5fygfHCAD0MQfQ&amp;usqp=CAU "Datacenter"){: .align-center style="width: 800px;"}
Источник: [securityboulevard.com](https://securityboulevard.com/).
{: style="text-align: center; font-size:0.7em;"}

Специально для таких случаев существуют протоколы удаленного доступа. Они позволяют подключиться к удаленному компьютеру и работать на нем так же, как вы обычно работаете на локальной физической машине. Такие протоколы разделяются на графические и текстовые. Графические протоколы, например, RDP (remote desktop protocol) передают по сети изображение графического интерфейса в одну сторону, движения мыши и события клавиатуры - в другую. Текстовые протоколы, такие как Telnet или SSH, передают только текстовую информацию и позволяют работать в терминале удаленной машины. Здесь мы рассмотрим самый популярный текстовый протокол удаленного доступа - SSH.

SSH — защищенный протокол для удаленного доступа к компьютерам. Через SSH можно выполнять операции в командной строке компьютера, который физически находится в другом месте. Иными словами, SSH — это дистанционная командная строка. Визуально вы работаете на своем компьютере, но в реальности — на другом.

Протокол — это набор соглашений, правил, по которым разные программы могут обмениваться информацией. SSH — это набор правил, который известен и вашему компьютеру, и физически отдаленному компьютеру. Пример: вы вводите команду удаления файла, и эта команда передается на другой компьютер и выполняется там. Ответ (или сообщение об ошибке) возвращается и показывается на вашем компьютере.

При удаленной работе обычно используются существующие открытые каналы коммуникации, то есть компьютерные сети. Почти всегда - подключение происходит через Интернет. Поэтому очень важно обеспечить безопасность соединения. При использовании протокола SSH вся информация передается в зашифрованном виде. Подобно тому, как некоторые сайты работают по HTTPS, шифруя информацию. Например, ваш онлайн-банкинг обязательно должен работать по защищенному соединению. В таком случае даже если всю информацию перехватывает злоумышленник, он не сможет расшифровать её.

Используя SSH можно подключиться к любой удаленной машине при соблюдении некоторых условий. Ни параметры удаленной машины, ни расстояние не имеют значения. Также можно подключаться как к физическим, так и к виртуальным машинам. При подключении, вы даже можете не знать, к чему вы подключаетесь, к физическому компьютеру или к виртуальной машине в датацентре какой-то компании. При работе никакой разницы вы не заметите.

Как и большинство сетевых протоколов, SSH работает по клиент-серверному принципу. То есть на вашем компьютере, за которым вы работаете физически должна быть установлена специальная программа - ssh клиент. С ее помощью вы и будете подключаться к другим машинам. А на удаленной машине, то есть той, к которой вы подключаетесь должна работать другая программа - ssh сервер. Она будет принимать ваше подключение, выполнять ваши команды, следить за правами доступа и так далее. Как настроить и клиент и сервер мы поговорим далее.


{% capture notice-2 %}

Выводы:
1. При работе часто возникает потребность выполнять операции на разных удаленных хостах.
2. Обычное незащищенное соединение для этого не подходит из-за проблем с безопасностью.
3. Протокол SSH позволяет выполнять команды терминала на удаленной машине.
4. Протокол SSH начинает шифровать соединение еще до ввода пароля пользователя.
6. Таким образом можно подключаться к любым машинам, физическим и виртуальным.
7. SSH является клиент-серверным протоколом. На локальной машине работает клиент ssh, на удаленной - сервер.

{% endcapture %}
<div class="notice--info">{{ notice-2 | markdownify }}</div>


### Что нужно для успешного удаленного доступа?

![SSH client and server](https://upload.wikimedia.org/wikipedia/commons/c/c8/SSH_diagram.png "SSH client and server"){: .align-center style="width: 800px;"}
Источник: [Wikimedia](https://commons.wikimedia.org/wiki/File:SSH_diagram.png).
{: style="text-align: center; font-size:0.7em;"}

Для того, чтобы иметь возможность подключиться к удаленной машине нужно соблюдение нескольких условий. Во-первых, как мы уже говорили, на ней должен быть установлен и работать ssh сервер. Существуют разные сервера, но самым распространенным является свободный и бесплатный сервер openssh. Он существует и для Linux и для Windows и для других операционных систем. Во многие дистрибутивы Linux, ориентированные на серверную работу он устанавливается по умолчанию. Если же его нет, то установить его очень просто командой: 

~~~bash
$ sudo apt install openssh-server
~~~

Естественно, удаленная машин должна быть доступна по сети с локальной. Если удаленная машина выключена, не подключена к сети или подключена к изолированной сети, куда не пройдут пакеты от локальной машины - подключиться вы к ней не сможете. Другими словами, удаленная машина должна пинговаться с локальной. 

Обратите внимание, что удаленная машина не должна быть скрыта NAT'ом или каким-либо сетевым экраном, блокирующим входящие соединения. Кстати, домание компьютеры, выходящие в интернет через обычного провайдера, как правило, как раз скрыты за NAT. Поэтому, находясь в  своей домашней сети, вы сможете подключиться к другому компьютеру в ней, а извне - нет.
{: .notice--warning}

Протокол ssh никак не связан с интернетом. Вы можете подключаться к машинам, которые подключены в общую локальную сеть, независимо от того, есть ли выход в интернет. В любом случае, вы должны знать адрес удаленной машины, чтобы к ней подключиться. Обычно используется IP-адрес. Но если у сервера есть назначенное доменное имя - можете использовать его.

Кроме IP-адреса нужно знать номер сетевого порта, который прослушивает сервер ssh. По умолчанию любая служба ssh использует порт 22. Однако, администраторам при настройке сервера рекомендуется ради безопасности изменить порт на случайный. Поэтому для подключения надо знать, был ли переназначен стандартный порт и, если да, то на какой.

Еще одно необходимое условие - знание учетной записи пользователя на удаленной машине. Помните, что после подключения вы первым делом должны будете авторизоваться на сервере. Поэтому для этого вы должны знать имя пользователя и его пароль. Этот пользователь должен быть зарегистрирован именно на удаленной машине. Ваш локальный пользователь не подойдет. Если вы сами настраиваете сервер, то такое надо предусмотреть заранее. Например завести специального пользователя, предназначенного именно для того, чтобы под ним на эту машину заходили по протоколу ssh. 

Еще одно предостережение. На реально используемых серверах обязательно должен стоять файерволл - специальная программа, которая блокирует входящие соединения на определенные порты. Она нужна для безопасности. Так вот, по умолчанию, такие программы блокируют все порты. Если вы хотите какие-то определенные порты использовать, их надо добавить в исключения файервола.

Как мы уже говорили, на локальной машине должне быть установле ssh-клиент. В \*nix-подобных системах (Linux, macOS) клиент обычно установлен в системе по умолчанию, и достаточно открыть терминал и воспользоваться командой ssh. В Windows нужно скачать сторонний клиент, например, Putty. SSH-клиентов тоже существует много разных. Есть даже графические клиенты. Но даже в них придется работать в командной строке - ведь сам протокол ssh - чисто текстовый.


{% capture notice-2 %}
Выводы:
1. Для подключения нужно знать адрес сервера, логин и пароль, порт подключения (по умолчанию, 22) .
1. Еще нужно, чтобы сетевая инфраструктура была правильно настроена.
1. Нужно, чтобы на удаленной машине работал сервер SSH.
4. Самый распространенный сервер - OpenSSH - бесплатный и открытый.
2. Нужно, чтобы удаленная машина была доступна по сети.
5. Системные администраторы могут заблокировать доступ к порту ssh.
6. По умолчанию, порты обычно закрыты, нужно их открыть.
8. На локальной машине должен быть установлен клиент ssh.
9. Есть консольные и графические клиенты ssh, но работать все равно придется в терминале.
{% endcapture %}
<div class="notice--info">{{ notice-2 | markdownify }}</div>


### Как подключиться к серверу из командной строки?


Для подключения нужно воспользоваться командой ssh. при запуске нужно указать адрес сервера, имя пользователя и, опционально, порт подключения. Вот как выглядит команда при использовании консольного клиента (в терминале):

```bash
$ ssh username@remote_host -p port
```

Например, для подключения к серверу 52.307.149.244 в аккаунт user нужно ввести:


```bash
$ ssh user@52.307.149.244
```

Если не указывать порт, то будет использован порт SSH по умолчанию — 22. Используемый порт задается при настройке SSH-сервера.

При первом подключении к конкретному серверу появится такое сообщение:


```bash
The authenticity of host '52.307.149.244 (52.307.149.244)' can't be established.
ECDSA key fingerprint is fd:fd:d4:f9:77:fe:73:84:e1:55:00:ad:d6:6d:22:fe.
Are you sure you want to continue connecting (yes/no)? yes
```

Введите yes в первый раз.

Это нужно для повышения безопасности. При настройке SSH-сервера создается уникальная комбинация символов — fingerprint («отпечатки пальцев»). Ваш компьютер запоминает эту комбинацию и сверяет ее при каждом новом соединении. Если кто-то переустановит SSH-сервер, или всю операционную систему, или вообще заменит удаленный компьютер, сохранив его адрес, то при следующем соединении вы узнаете об этом, потому что изменится fingerprint. Если fingerprint не меняется, то такое сообщение не будет появляться.


Простейший вариант — подключение по паролю. После ввода команды ssh система запросит пароль:

```bash
$ ssh ivan@52.307.149.244
password: 
```

Пароль придется вводить каждый раз. Обратите внимание, что пароль нужно вводить уже после установки подключения. Это сделано для того, чтобы передаваемый по сети пароль уже мог шифроваться. Ведь передавать пароли в открытом виде - очень небезопасно.

После подключения вы войдете в командную строку удаленной машины. В командной строке немного чего изменится.

![styled-image](/assets/images/os_text/lx20-1.png "Linux directory structure"){: .align-center style="width: 800px;"}

Обратите внимание, что изменилось приглашение командной строки - теперь там отображаются данные удаленной машины, другое имя пользователя. Другое приглашение - явный знак того, что вы работаете не на своем локальном физическом компьютере. 

Теперь можно вводить любые команды и они будут выполнены на удаленном компьютере. Порядок работы такой же, как и в обычной командной строке. 

Для выхода из удаленного сеанса необходимо нажать комбинацию клавиш Ctrl + D. Либо можно ввести команду exit.


{% capture notice-2 %}
Выводы:
1. Команда ssh username@remote_host осуществляет подключение к удаленному терминалу.
2. Если вы подключились к этому компьютеру первый раз, нужно будет подтвердить его.
3. Опция -p позволяет подключиться по любому номеру порта.
4. После установки соединения вам нужно будет ввести пароль от удаленной учетной записи.
5. После этого вы сможете работать в командной строке так же, как и на локальной машине.
6. Для выхода из удаленного сеанса есть команда exit или сочетание Ctrl + D.
{% endcapture %}
<div class="notice--info">{{ notice-2 | markdownify }}</div>


### Как подключиться к серверу по ключу?

Пи работе с удаленными машинами приходится при каждом подключении вводить пароль. Если вы работаете на разных машинах, приходится запоминать все пароли от всех удаленных компьютеров. Это, конечно, безопасно, но очень неудобно. К счастью, методы асимметричного шифрования позволяют избежать этого и авторизоваться на удаленных машинах без пароля, по ключу.

Асимметричные шифры устроены таким образом, что всегда используют пару ключей - один для шифрования данных, а другой, парный - для расшифровки. Эта пара ключей генерируется вместе специальным алгоритмом. И по одному ключу невозможно восстановить другой. Причем расшифровать данные можно только тем ключом, который был сгенерирован в паре с тем, которым эти данные были зашифрованы.

Поэтому пару ключей можно использовать и для авторизации. Один из ключей - тот, что используется для шифрования - назвается приватным. Его нельзя никому передавать, показывать или пересылать. Его надо хранить в секрете. Второй ключ - публичный - используется для расшифровывания. Вот его можно передавать кому угодно. Обратите внимание, что если какие-то данные удается расшифровать вашим публичным ключом, это значит, что они были зашифрованы вашим приватным ключом, и никаким другим. А так как ваш приватный ключ знаете только вы, значит и отправили эти данные именно вы. Так публичный ключ как бы подтверждает вашу личность.

Обратите внимание, что в такой схеме не очень соблюдается секретность передачи данных - ведь расшифровать их может кто угодно. Подробное рассмотрение алгоритмов шифрования и протоколов и схем их применения далеко выходит за рамки нашей темы. Заметим только, что в реальности для обеспечения секретности, целостности и идентификации в криптографических системах используются разные схемы. Мы сейчас рассматриваем только использование ключей для авторизации на сервере.
{: .notice--warning}

Итак, чтобы использовать авторизацию по ключу надо первым делом сгенерировать свою собственную пару ключей. Для этого используется программа ssh-keygen, которая включена в пакет ssh-клиента. 

Создадим пару ключей:

```bash
$ ssh-keygen
```

Программа запустится и спросит, куда сохранять ключи:

```bash
Generating public/private rsa key pair.
Enter file in which to save the key (/home/demo/.ssh/id_rsa):
```

Нажмите Enter для сохранения в стандартное место — директорию .ssh/id_rsa в вашей домашней директории.

Программа запросит passphrase. Это вроде пароля для ключа. Пароль используется для дополнительной защиты - его надо будет вводить каждый раз при использовании ключа. Идея в том, что вместо разных паролей придется запомнить только один - от ключа. Можно просто нажать Enter и пропустить этот шаг. 

```bash
Enter passphrase (empty for no passphrase):
Enter same passphrase again:
```

Ключи созданы:

```bash
Your identification has been saved in /home/demo/.ssh/id_rsa.
Your public key has been saved in /home/demo/.ssh/id_rsa.pub.
The key fingerprint is:
8c:e9:7c:fa:bf:c4:e5:9c:c9:b8:60:1f:fe:1c:d3:8a root@here
The key's randomart image is:
+--[ RSA 2048]----+
|                 |
|                 |
|                 |
|       +         |
|      o S   .    |
|     o   . * +   |
|      o + = O .  |
|       + = = +   |
|      ....Eo+    |
+-----------------+
```

Теперь у вас есть два файла:

* \~/.ssh/id_rsa — приватный ключ. Никогда никому и никуда не передавайте его!
* \~/.ssh/id_rsa.pub — публичный ключ. Спокойно распространяйте его.

В Windows можно использовать ssh-gen в подсистеме Ubuntu for Windows или в командной строке Git for Windows. Или создавать ключи графической утилитой вроде PuTTYgen.

После генерации необходимо скопировать ключ на удаленный сервер. Нужно добавить публичный ключ на сервер в файл \~/.ssh/authorized_keys. Самый простой способ — запустить на локальной машине команду для копирования ключа:

```bash
$ ssh-copy-id -i /home/demo/.ssh/id_rsa ivan@52.307.149.244
```

Обратите внимание, что при этом придется обязательно ввести пароль от учетки на сервере. Таким образом скопированный ключ подтверждает, что его владелец знает пароль, поэтому в будущем можно его пускать без проверки.

Другой способ — подключиться по паролю, открыть в редакторе файл \~/.ssh/authorized_keys и добавить в конец текст из вашего файла \~/.ssh/id_rsa.pub.

Теперь при подключении пароль запрашиваться не будет. После включения соединений по ключу рекомендуется отключить подключение по паролю в настройках ssh сервера.

Один и тот же публичный ключ можно использовать для авторизации на разных серверах. Просто скопируйте его туда, куда часто заходите. Кроме обычных компьютеров, авторизация через SSH по ключу используется и на многих публичных сервисах. Например, популярный хостинг программных репозиториев GitHub заставляет использовать именно доступ по ключу для синхронизации проектов. Многие облачные сервисы так же имеют возможность авторизации по ключу. 

Только заметьте, что если вы скомпрометировали ваш приватный ключ, придется генерировать новую пару ключей. А затем придется рассылать новый публичный ключ по всем свои серверам. Причем, компрометация - это не когда вы его по ошибке где-то опубликовали, это когда возникает малейшее подозрение, что третьи лица могли получить к нему доступ.
{: .notice--danger}

{% capture notice-2 %}
Выводы:
1. Запоминать много паролей от серверов часто неудобно и небезопасно.
2. Асимметричное шифрование позволяет избежать ввода пароля каждый раз.
3. Команда ssh-keygen позволяет сгенерировать пару ключей - приватный и публичный.
4. Приватный ключ надо хранить в секрете. Если он скомпрометирован, придется создавать новую пару.
5. Публичный ключ может удостоверять подлинность отправителя.
6. Можно скопировать публичный ключ на сервер командой ssh-copy-id -i.
7. Ключ может быть разослан на несколько серверов, и на них можно заходить без пароля.
8. Ключ тоже можно защитить паролем.
{% endcapture %}
<div class="notice--info">{{ notice-2 | markdownify }}</div>


### Как запомнить частые подключения?

При работе с многими удаленными серверами кроме паролей приходится запоминать еще много информации: ip-адреса, имена пользователей на каждом сервере, номера нестандартных портов, которые тоже могут отличаться, другие опции. Это не так критично, как пароли, но все равно может доставить неудобств. 

В стандартном клиенте ssh предусмотрена возможность запомнить частые подключения в конфигурационном файле. Он располагается по адресу \~/.ssh/config. Если его там нет, вполне можно создать новый пустой. Вообще, папка \~/.ssh/ - это общее место, где собираются многие файлы, имеющие отношение к входящим или исходящим подключениям по ssh. Например, именно туда сохраняются файлы ключей и публичные ключи удаленных пользователей.

Этот файл имеет довольно простую структуру. В нем прописывается символьное имя подключения, которые вы будете использовать вместо строки подключения в команде ssh. После этого могут идти несколько опций, например - имя пользователя, адрес хоста, номер порта, адрес публичного ключа, который будет использоваться при подключении. Выглядит это примерно так:

```
Host targaryen
    HostName 192.168.1.10
    User daenerys
    Port 7654
    IdentityFile ~/.ssh/targaryen.key

Host tyrell
    HostName 192.168.10.20
    user oberyn

Host martell
    HostName 192.168.10.50
```

У этого файла довольно много опций, но эти - самые полезные. После того, как в файл добавлена запись можно подключаться к хосту только по алиасу, например так:

```bash
$ ssh targaryen
```

Все остальные параметры клиент подставит сам. 

{% capture notice-2 %}
Выводы:
1. Файл \~/.ssh/config используется, чтобы запомнить часто использующиеся подключения.
2. Можно присвоить символьное имя и связать его с адресом, именем пользователя.
3. В этом файле можно прописать использование определенного файла ключа.
5. Файл приватного ключа в таком случае выступает идентификацией (identity).
{% endcapture %}
<div class="notice--info">{{ notice-2 | markdownify }}</div>


### Зачем нужна программа Tmux?

При работе в удаленной сессии есть один подводный камень. Из-за особенности функционирования процессов в Linux, когда мы выходим из сеанса (разлогиниваемся), то все запущенные команды и программы автоматически завершатся. Следующий раз нам приходится начинать работы с самого начала. И нельзя запустить какой-то долгий процесс, чтобы он выполнялся, пока мы отключились. Такое происходит и в случае непреднамеренного отключения, например, при обрыве связи.

Чтобы обойти это ограничение, существуют специальные программы. Они не входят в стандартные дистрибутивы, так что их придется устанавливать отдельно. Такие программы работают резидентно, то есть в режиме сетевой службы и поэтому могут поддерживать сеанс даже после того, как пользователь отключился.

Tmux (terminal multiplexor) - популярная программа, значительно
облегчающая работы в терминале на удаленной машине. Среди
возможностей данной программы:

* разделение экрана на несколько консолей
* создание нескольких экранов
* сохранение выполняющихся процессов на удаленной машине после выхода из сессии
* расшаривание ssh сессий нескольким пользователям

То есть кроме поддержания сессии tmux сильно "прокачивает" стандартную командную строчку. Это очень упрощает и ускоряет сложную работу на сервере.

Для начала работы необходимо подключиться к удаленной машине по ssh.
Конечно, можно использовать программу tmux на локальной машине для
расширения возможностей терминала, но здесь мы рассмотрим возможности
этой программы при удаленном доступе к терминалу.

![](/assets/images/os_text/lx2-2/image16.png){: .align-center style="width: 800px;"}

При необходимости нужно установить tmux, введя команду

```
sudo apt install tmux
```

Обратите внимание, что эта программа должна быть установлена именно на той машине, на которой вы будете выполнять команды. То есть, если вы планируете использовать ее для работы на удаленном сервере, то именно в нем она и должна быть установлена. Если она есть только на вашей локальной машине, на сервере она не заработает.

![](/assets/images/os_text/lx2-2/image21.png){: .align-center style="width: 800px;"}

Теперь можно запустить tmux, введя одноименную команду:

![](/assets/images/os_text/lx2-2/image7.png){: .align-center style="width: 800px;"}

На экране мы видим главное окно программы tmux:

![](/assets/images/os_text/lx2-2/image9.png){: .align-center style="width: 800px;"}

Сочетание клавиш \<ctrl>+B позволяет вводить команды tmux. Наиболее
применимые команды:

* ctrl-b c - запуск нового окна;
* ctrl-b , - переименование окна;
* ctlb-b p - переключение к предыдущему окну;
* ctlb-b n - переключение к следующему окну;
* ctlb-b w - вывести список окон;
* ctlb-b % - разделение окна вертикально на две панели;
* ctlb-b “ - разделение окна горизонтально;
* ctlb-b d - отсоединиться от сессии;

Обратите внимание, сначала надо зажать \<ctrl>+B именно как комбинацию клавиш. Потом отпустить и сразу нажать клавишу, соответствующую нужной команде. Поначалу такая работа покажется очень неудобной, но со временем вы привыкните к такому оригинальному методу ввода команд.

Обратите внимание на нижнюю строчку. Здесь перечислены открытые окна
терминала. Можно воспринимать их как вкладки, по которым можно
перемещаться. Мы можем создать новое окно (ctrl-b c):

![](/assets/images/os_text/lx2-2/image8.png){: .align-center style="width: 800px;"}

Теперь мы видим, что в нижней строке появилось окно 1. Звездочкой
обозначено текущее окно.

Мы можем также переименовать окно (ctrl-b ,), чтобы лучше ориентироваться. Это бывает полезно для организации рабочего пространства.

![](/assets/images/os_text/lx2-2/image5.png){: .align-center style="width: 800px;"}

Теперь мы имеем второе окно (под номером 1, так как нумерация начинается с 0) с именем window1.

![](/assets/images/os_text/lx2-2/image20.png){: .align-center style="width: 800px;"}

Давайте для иллюстрации запустим в первом окне команду htop:

![](/assets/images/os_text/lx2-2/image19.png){: .align-center style="width: 800px;"}

Tmux позволяет вывести список всех созданных окон (ctrl-b w), в котором можно
перемещаться между ними. Также доступен предварительный просмотр
содержимого каждого окна:

![](/assets/images/os_text/lx2-2/image18.png){: .align-center style="width: 800px;"}

Работая в этой программе можно также разделять пространство в отдельно
взятом окне на две панели. В каждой панели можно работать независимо,
вводить команды и наблюдать результат одновременно.

![](/assets/images/os_text/lx2-2/image1.png){: .align-center style="width: 800px;"}

Текущее окно или панель можно разбить на две панели как вертикально (ctrl-b %), так и горизонтально (ctrl-b \"). Панели можно дробить неограниченное число раз:

![](/assets/images/os_text/lx2-2/image10.png){: .align-center style="width: 800px;"}

При выполнении команды exit (или ctrl-d) панель закрывается.

![](/assets/images/os_text/lx2-2/image17.png){: .align-center style="width: 800px;"}

Если эта панель была единственной в окне - то закроется все окно, а если окно было единственным - программа tmux завершится.

![](/assets/images/os_text/lx2-2/image6.png){: .align-center style="width: 800px;"}

Еще одной возможностью tmux является работа с сессиями. Если
использовать сессии, то вместо выхода из сессии подключения
к удаленной машине можно отключиться от сессии, а при повторном
подключении сессия сессия сохранит свое состояние. То есть, все
процессы, запущенные на удаленной машине так и будут продолжать
выполняться.

Для запуска сессии необходимо запустить tmux со специальным параметром, указав имя сессии:

![](/assets/images/os_text/lx2-2/image11.png){: .align-center style="width: 800px;"}

Запустим в этой сессии какой-нибудь интерактивный процесс:

![](/assets/images/os_text/lx2-2/image14.png){: .align-center style="width: 800px;"}

Нажав сочетание клавиш ctrl-b d, отсоединимся от сессии:

![](/assets/images/os_text/lx2-2/image3.png){: .align-center style="width: 800px;"}

При помощи команд терминала можно убедиться, что программа, которую мы запустили все еще работает, несмотря на то, что мы вышли из
родительского процесса.

![](/assets/images/os_text/lx2-2/image12.png){: .align-center style="width: 800px;"}

Можно даже выйти из подключения к удаленной машине и спустя некоторое
время зайти обратно.

![](/assets/images/os_text/lx2-2/image13.png){: .align-center style="width: 800px;"}

При запуске tmux можно вывести список всех открытых сессий:

![](/assets/images/os_text/lx2-2/image4.png){: .align-center style="width: 800px;"}

Соответственно, можно вместо запуска нового терминала подключиться к
одной из существующих сессий:

![](/assets/images/os_text/lx2-2/image2.png){: .align-center style="width: 800px;"}

Как мы можем наблюдать, терминал остался в том же состоянии, в котором мы его оставили, когда выходили из сессии:

![](/assets/images/os_text/lx2-2/image15.png){: .align-center style="width: 800px;"}


{% capture notice-2 %}
Выводы:
1. При отключении от удаленного хоста все запущенные процессы завершатся.
2. Иногда нужно запустить процесс так, чтобы он продолжался на сервере после отключения.
3. Для этого существуют специальные резидентные программы, например, tmux.
4. Tmux организует сессии, которые продолжаются даже после отключения пользователя.
5. Также вы можете продолжать работу с того места, с которого отключились.
6. Tmux позволяет создавать несколько вкладок, разбивать окно терминала на области.
7. Tmux сильно упрощает работу с терминалом и с удаленными серверами.
8. Для работы tmux должен быть установлен на удаленном сервере.
{% endcapture %}
<div class="notice--info">{{ notice-2 | markdownify }}</div>
</ctrl></ctrl></div>
<br/><br/><br/><br/>
<h2 id="Практика: SSH"> Практика: SSH</h2>
<p> На практике узнаем, как установить и настроить все необходимое для удаленного доступа, научимся подключаться к машине по паролю, затем научимся использовать ключи.</p>
<h3 id="2-video">Видео занятия</h3>
<div class="responsive-video-container">
<iframe allowfullscreen="" frameborder="0" mozallowfullscreen="" src="https://www.youtube-nocookie.com/embed/5kJKhd7wEj8" webkitallowfullscreen="">
</iframe>
</div>
<div>
  ### Практическая работа - удаленная работа с Linux через SSH


#### Цель работы

Продемонстрировать умение работать с командной строкой Linux с удаленной машиной по протоколу SSH. 


#### Задания для выполнения



1. Убедитесь, что на виртуальной машине установлен и запущен SSH-сервер. 
2. В программе Putty (или любом другом SSH-клиенте), запущенной на хост-машине подключаемся по SSH на нужный IP к виртуальной машине и далее работаем с системой только через SSH
3. Отображаем содержимое /etc/apt/sources.list, используя команду cat
4. С её же помощью и символа “&gt;” создаем файл в домашней директории пользователя.
5. Отображаем список процессов.
6. Запускаем мониторинг ресурсов системы.
7. Обновляем кэш менеджера пакетов apt-get.
8. Установите удаленно какой-либо пакет из репозитория на ваш выбор.
9. Выполните копирование файла по протоколу SSH с одного компьютера на другой. 
10. Перезагрузить удаленный сервер через SSH.


#### Методические указания

##### ssh-agent

При работе с ключами возможны две неудобные ситуации:



1. Если при созданиия ключа вы указали passphrase (пароль для ключа), то вам придется вводить пароль при каждом подключении.
2. Если у вас есть несколько ключей для разных целей, то при соединении по ssh придется указывать нужный ключ вручную

ssh-agent решает эти проблемы. Этот агент аутентификации (authentication agent) работает на фоне в \*nix-системах. В зависимости от системы, вам, возможно, придется установить и настроить его автозапуск самостоятельно.

Если добавить ключ к агенту, то:

1. для него больше не будет спрашиваться passphrase
2. не нужно будет вводить ключ вручную — он будет автоматически использован при соответствующем подключении

ssh-add /home/demo/.ssh/id_rsa добавит ключ id_rsa в запущенный в системе агент. Если у него есть passphrase, то агент попросит ввести его.

Если запустить ssh-add без аргументов, то будут добавлены ключи \~/.ssh/id_rsa, \~/.ssh/id_dsa, \~/.ssh/id_ecdsa, \~/.ssh/id_ed25519 и \~/.ssh/identity.

Список добавленных в агент ключей можно посмотреть командой ssh-add -L:


```bash
$ ssh-add -L
ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQC91r/+5WEQHcxVMrxpP9jKuONjlrnEHshfG3v/ab2NKDSljdskODOIsdhaaoDoiSADhAaoDISHasoiDiASisjadOHISDdKJDASHSidshIHDSIHDIAsdjasAs7XG/drBhi16zQ2e8VcLD7bVQS1Cpo0O1tP+93YQBvcIE02RltqVKYo7BlgCaJzpdowK8fHSzpfCYsEFjdjosOjfdsjdjkAJOKkKKHJHhaIiAiaihsiIoqkpqdmlnvnuuUSCaAS8aDhajiadiiAahhakKAKDHAKurmD08jnX9HfH/d15pLK/Glo1Su6iEOU3bW8k92QlY54pPFLKiNRPFuUryE5md7T /Users/demo/.ssh/some_key.pem
ssh-rsa AAAAB3NzaC1yc2EAAAABIwAAAQEAsLC9WpSZ/9YpQ2z1FTSsORcP+ohzCdVjYaoc3C0fRnUbkp4SnvMHFTHNFFod0FhV0cQcOLvBsZAK/0tUPIXeDDFvYD70r5i0AsQbqA0k7gK3b3MP7tmnPxMHd607TI+1FMO54Yig0vnpZOgKmgCsxWq6tckwyLB91BlPiGxLBZiu5yPDIguEQCSnAwkF0vjqrNGsoHB4+fkj0USfjiifsjihf39hifSIHiJFHSijshfj39jfsjisfiisfiissr893IFsifijfsjSOIiAShadfhssU0q0JpjaDEWcMmYXmuz3xSnbhkueGLBXMU2zXDFDWCDSHq9/oRr29UAfVaHAMw== /Users/demo/.ssh/id_rsa
```

ssh-agent привязан к сессии. Поэтому, например, если перезагрузить компьютер, то ключи нужно будет добавлять в агент заново.


##### Форвардинг (проброс) ключей

Если вы подключились к удаленному серверу X, и с него хотите подключиться к другому серверу Y, например, чтобы сделать git pull с GitHub’а, то придется держать копию ваших ключей на сервере X.

Утилита ssh с флагом -A позволяет «пробросить» ключи с подключаемой машины в удаленную:

```bash 
$ ssh -A ivan@52.307.149.244
```

Ключи, добавленные к агенту аутентификации (ssh-agent) станут доступными на удаленном сервере. При этом файлы-ключи физически не будут находиться на сервере.


#### Контрольные вопросы



1. Для чего нужен протокол SSH?
2. Почему этот протокол называют защищенным?
3. Какая информация нужна для того, чтобы подключиться к удаленной машине?
4. Из чего состоит пара ключей?
5. Каковы рекомендуемые действия по безопасному использованию SSH?
6. Как установить и настроить пакета OpenSSH в Linux и Windows?


#### Дополнительные задания



1. Выполните настройку Вашего и виртуального компьютеров так, чтобы возможно было входить с одного на другой по открытому ключу, без явного запроса пароля, по протоколу SSH. 
2. Создайте файл в домашней директории локальной машины. Скопируйте его на удаленную машину при помощи утилиты scp. Удалите исходный файл. Скопируйте файл обратно.
3. Измените порт по умолчанию на удаленной машине для сервера SSH. Перезапустите сервер. Проверьте корректность подключения.
4. Сохраните свое подключение на локальной машине при помощи конфигурационного файла. Проверьте работоспособность подключения по имени.
5. (*) Проанализировать сравнительную скорость ssh-соединения, выполнив следующие замеры:
    1. Выполнить передачу файла через FTP с помощью утилиты wget. Проанализировать проходящие пакеты с помощью утилиты tcpdump(-ХХ). Запомнить скорость передачи.
    2. Выполнить передачу через ssh. Проанализировать проходящие пакеты с помощью утилиты tcpdump(-ХХ). Запомнить скорость передачи. Сравнить передаваемые пакеты и скорости передачи данных.
    3. Включить сжатие ssh и повторить замер скорости. В каждом тесте анализировать результаты для файла состоящего из нулей и для файла состоящего из случайных последовательностей (dd if= /dev/urandom of=file ds=1M count=10), для текстового конфигурационного файла или бинарного файла.
</div>
<br/><br/><br/><br/>
<h2 id="Практика: Tmux"> Практика: Tmux</h2>
<p> Нам предстоит освоить основные приемы работы с самой удобной и распространенной программой для удаленного администрирования - tmux. Мы научимся использовать ее при удаленной работе с машиной по протоколу ssh.</p>
<h3 id="3-video">Видео занятия</h3>
<div class="responsive-video-container">
<iframe allowfullscreen="" frameborder="0" mozallowfullscreen="" src="https://www.youtube-nocookie.com/embed/5t9TW9TnOxU" webkitallowfullscreen="">
</iframe>
</div>
<div>
  ### Практическая работа - Основы работы с программой tmux

#### Цель работы

Освоить основные приемы работы с программой tmux при удаленной работе с
машиной по протоколу ssh.

#### Задания для выполнения

1.  Начните рабочую сессию.
2.  При необходимости установите программу tmux.
3.  Запустите программу tmux.
4.  Создайте новое окно. Назовите его window1.
5.  Запустите в первом окне программу htop. Назовите его htop.
6.  Второе окно разделите вертикально.
7.  Разделите одну из этих панелей горизонтально.
8.  Выйдите из одного из сеансов для того, чтобы закрыть соответствующую панель.
9.  Выйдите из tmux.
10. Запустите tmux, указав имя новой сессии.
11. Запустите htop.
12. Отсоединитесь от сессии.
13. Убедитесь, что процесс htop еще запущен.
14. Выйдите из сессии.
15. Начните сессию заново.
16. Выведите список активных сессий.
17. Подключитесь к той же сессии.


#### Контрольные вопросы

1.  Для чего применяется программа tmux?

2.  Будет ли выполняться процесс, запущенный в сеансе удаленного доступа после разъединения?

#### Дополнительные задания

1.  Создайте новую сессию tmux. Используйте ее для совместной работы нескольких пользователей на одной и той же удаленной машине.

</div>
<h3 id="3-additional">Дополнительные материалы</h3>
<ul>
<li> <a href="https://linuxize.com/post/getting-started-with-tmux/"> Getting started with Tmux </a>
</li><li> <a href="https://leimao.github.io/blog/Tmux-Tutorial/"> Tmux Tutorial </a>
</li></ul>
<br/><br/><br/><br/>
</section>
<footer class="page__meta">
<p class="page__taxonomy">
<strong><i aria-hidden="true" class="fas fa-fw fa-folder-open"></i> Разделы: </strong>
<span itemprop="keywords">
<a class="page__taxonomy-item" href="/categories/#os" rel="tag">os</a>
</span>
</p>
<p class="page__date"><strong><i aria-hidden="true" class="fas fa-fw fa-calendar-alt"></i> Дата изменения:</strong> <time datetime="2022-09-27T12:49:07+00:00">September 27, 2022</time></p>
</footer>
<nav class="pagination">
<a class="pagination--pager" href="/os/1/1-cli/" title="LX1 Основы командной строки
">Предыдущая</a>
<a class="pagination--pager" href="/os/1/3-users/" title="LX3 Права и пользователи
">Следующая</a>
</nav>
</div>
</article>
</div>
</div>
<div class="page__footer" id="footer">
<footer>
<!-- start custom footer snippets -->
<!-- end custom footer snippets -->
<div class="page__footer-follow">
<ul class="social-icons">
<li><strong>Связаться со мной:</strong></li>
<li><a href="https://vk.com/koroteev_m" rel="nofollow noopener noreferrer"><i aria-hidden="true" class="fab fa-fw fa-vk"></i> Vkontakte</a></li>
<li><a href="https://twitter.com/koroteev_m" rel="nofollow noopener noreferrer"><i aria-hidden="true" class="fab fa-fw fa-twitter-square"></i> Twitter</a></li>
<li><a href="/feed.xml"><i aria-hidden="true" class="fas fa-fw fa-rss-square"></i> RSS-лента</a></li>
</ul>
</div>
<div class="page__footer-copyright">© 2022 Михаил Коротеев. Сайт работает на <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>
</footer>
</div>
<script src="/assets/js/main.min.js"></script>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-1K09X3NDBE"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-1K09X3NDBE', { 'anonymize_ip': false});
</script>
<!-- Yandex.Metrika counter -->
<script type="text/javascript">
   (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
   m[i].l=1*new Date();k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
   (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");

   ym(77706580, "init", {
        clickmap:true,
        trackLinks:true,
        accurateTrackBounce:true
   });
</script>
<noscript><div><img alt="" src="https://mc.yandex.ru/watch/77706580" style="position:absolute; left:-9999px;"/></div></noscript>
<!-- /Yandex.Metrika counter -->
<script async="" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-MML-AM_CHTML" type="text/javascript">
</script>
<script type="text/x-mathjax-config">
   MathJax.Hub.Config({
     extensions: ["tex2jax.js"],
     jax: ["input/TeX", "output/HTML-CSS"],
     tex2jax: {
       inlineMath: [ ['$','$'], ["\\(","\\)"] ],
       displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
       processEscapes: true
     },
     "HTML-CSS": { availableFonts: ["TeX"] }
   });
</script>
<script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
</body>
</html>
